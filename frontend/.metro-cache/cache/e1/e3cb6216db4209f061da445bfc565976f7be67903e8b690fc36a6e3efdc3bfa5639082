{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":26,"index":175}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":176},"end":{"line":4,"column":39,"index":215}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _expoConstants = require(_dependencyMap[3], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const API_URL = Constants.default.expoConfig?.extra?.backendUrl || process.env.EXPO_PUBLIC_BACKEND_URL || 'http://localhost:8001';\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('token');\n        if (storedToken) {\n          setToken(storedToken);\n          await fetchUserData(storedToken);\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const fetchUserData = async authToken => {\n      try {\n        const response = await axios.default.get(`${API_URL}/api/auth/me`, {\n          headers: {\n            Authorization: `Bearer ${authToken}`\n          }\n        });\n        setUser(response.data);\n      } catch (error) {\n        console.error('Error fetching user data:', error);\n        await AsyncStorage.default.removeItem('token');\n        setToken(null);\n        setUser(null);\n      }\n    };\n    const login = async (username, password) => {\n      try {\n        const response = await axios.default.post(`${API_URL}/api/auth/login`, {\n          username,\n          password\n        });\n        const {\n          access_token\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        setToken(access_token);\n        await fetchUserData(access_token);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const register = async (username, email, password) => {\n      try {\n        const response = await axios.default.post(`${API_URL}/api/auth/register`, {\n          username,\n          email,\n          password,\n          daily_calorie_goal: 2000\n        });\n        const {\n          access_token\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        setToken(access_token);\n        await fetchUserData(access_token);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('token');\n      setToken(null);\n      setUser(null);\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        loading,\n        login,\n        register,\n        logout\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }, this);\n  };\n  const useAuth = () => {\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n});","lineCount":134,"map":[[13,2,25,0,"Object"],[13,8,25,0],[13,9,25,0,"defineProperty"],[13,23,25,0],[13,24,25,0,"exports"],[13,31,25,0],[14,4,25,0,"enumerable"],[14,14,25,0],[15,4,25,0,"get"],[15,7,25,0],[15,18,25,0,"get"],[15,19,25,0],[16,6,25,0],[16,13,25,0,"AuthProvider"],[16,25,25,0],[17,4,25,0],[18,2,25,0],[19,2,107,0,"Object"],[19,8,107,0],[19,9,107,0,"defineProperty"],[19,23,107,0],[19,24,107,0,"exports"],[19,31,107,0],[20,4,107,0,"enumerable"],[20,14,107,0],[21,4,107,0,"get"],[21,7,107,0],[21,18,107,0,"get"],[21,19,107,0],[22,6,107,0],[22,13,107,0,"useAuth"],[22,20,107,0],[23,4,107,0],[24,2,107,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,2,0],[26,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[26,42,2,0],[26,45,2,0,"require"],[26,52,2,0],[26,53,2,0,"_dependencyMap"],[26,67,2,0],[27,2,2,0],[27,6,2,0,"AsyncStorage"],[27,18,2,0],[27,21,2,0,"_interopDefault"],[27,36,2,0],[27,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[27,73,2,0],[28,2,3,0],[28,6,3,0,"_axios"],[28,12,3,0],[28,15,3,0,"require"],[28,22,3,0],[28,23,3,0,"_dependencyMap"],[28,37,3,0],[29,2,3,0],[29,6,3,0,"axios"],[29,11,3,0],[29,14,3,0,"_interopDefault"],[29,29,3,0],[29,30,3,0,"_axios"],[29,36,3,0],[30,2,4,0],[30,6,4,0,"_expoConstants"],[30,20,4,0],[30,23,4,0,"require"],[30,30,4,0],[30,31,4,0,"_dependencyMap"],[30,45,4,0],[31,2,4,0],[31,6,4,0,"Constants"],[31,15,4,0],[31,18,4,0,"_interopDefault"],[31,33,4,0],[31,34,4,0,"_expoConstants"],[31,48,4,0],[32,2,4,39],[32,6,4,39,"_reactJsxDevRuntime"],[32,25,4,39],[32,28,4,39,"require"],[32,35,4,39],[32,36,4,39,"_dependencyMap"],[32,50,4,39],[33,2,6,0],[33,8,6,6,"API_URL"],[33,15,6,13],[33,18,6,16,"Constants"],[33,27,6,25],[33,28,6,25,"default"],[33,35,6,25],[33,36,6,26,"expoConfig"],[33,46,6,36],[33,48,6,38,"extra"],[33,53,6,43],[33,55,6,45,"backendUrl"],[33,65,6,55],[33,69,6,59,"process"],[33,76,6,66],[33,77,6,67,"env"],[33,80,6,70],[33,81,6,71,"EXPO_PUBLIC_BACKEND_URL"],[33,104,6,94],[33,108,6,98],[33,131,6,121],[34,2,23,0],[34,8,23,6,"AuthContext"],[34,19,23,17],[34,35,23,20],[34,39,23,20,"createContext"],[34,45,23,33],[34,46,23,33,"createContext"],[34,59,23,33],[34,61,23,63,"undefined"],[34,70,23,72],[34,71,23,73],[35,2,25,7],[35,8,25,13,"AuthProvider"],[35,20,25,66],[35,23,25,69,"AuthProvider"],[35,24,25,70],[36,4,25,72,"children"],[37,2,25,81],[37,3,25,82],[37,8,25,87],[38,4,26,2],[38,10,26,8],[38,11,26,9,"user"],[38,15,26,13],[38,17,26,15,"setUser"],[38,24,26,22],[38,25,26,23],[38,28,26,26],[38,32,26,26,"useState"],[38,38,26,34],[38,39,26,34,"useState"],[38,47,26,34],[38,49,26,48],[38,53,26,52],[38,54,26,53],[39,4,27,2],[39,10,27,8],[39,11,27,9,"token"],[39,16,27,14],[39,18,27,16,"setToken"],[39,26,27,24],[39,27,27,25],[39,30,27,28],[39,34,27,28,"useState"],[39,40,27,36],[39,41,27,36,"useState"],[39,49,27,36],[39,51,27,52],[39,55,27,56],[39,56,27,57],[40,4,28,2],[40,10,28,8],[40,11,28,9,"loading"],[40,18,28,16],[40,20,28,18,"setLoading"],[40,30,28,28],[40,31,28,29],[40,34,28,32],[40,38,28,32,"useState"],[40,44,28,40],[40,45,28,40,"useState"],[40,53,28,40],[40,55,28,41],[40,59,28,45],[40,60,28,46],[41,4,30,2],[41,8,30,2,"useEffect"],[41,14,30,11],[41,15,30,11,"useEffect"],[41,24,30,11],[41,26,30,12],[41,32,30,18],[42,6,31,4,"loadStoredAuth"],[42,20,31,18],[42,21,31,19],[42,22,31,20],[43,4,32,2],[43,5,32,3],[43,7,32,5],[43,9,32,7],[43,10,32,8],[44,4,34,2],[44,10,34,8,"loadStoredAuth"],[44,24,34,22],[44,27,34,25],[44,33,34,25,"loadStoredAuth"],[44,34,34,25],[44,39,34,37],[45,6,35,4],[45,10,35,8],[46,8,36,6],[46,14,36,12,"storedToken"],[46,25,36,23],[46,28,36,26],[46,34,36,32,"AsyncStorage"],[46,46,36,44],[46,47,36,44,"default"],[46,54,36,44],[46,55,36,45,"getItem"],[46,62,36,52],[46,63,36,53],[46,70,36,60],[46,71,36,61],[47,8,37,6],[47,12,37,10,"storedToken"],[47,23,37,21],[47,25,37,23],[48,10,38,8,"setToken"],[48,18,38,16],[48,19,38,17,"storedToken"],[48,30,38,28],[48,31,38,29],[49,10,39,8],[49,16,39,14,"fetchUserData"],[49,29,39,27],[49,30,39,28,"storedToken"],[49,41,39,39],[49,42,39,40],[50,8,40,6],[51,6,41,4],[51,7,41,5],[51,8,41,6],[51,15,41,13,"error"],[51,20,41,18],[51,22,41,20],[52,8,42,6,"console"],[52,15,42,13],[52,16,42,14,"error"],[52,21,42,19],[52,22,42,20],[52,43,42,41],[52,45,42,43,"error"],[52,50,42,48],[52,51,42,49],[53,6,43,4],[53,7,43,5],[53,16,43,14],[54,8,44,6,"setLoading"],[54,18,44,16],[54,19,44,17],[54,24,44,22],[54,25,44,23],[55,6,45,4],[56,4,46,2],[56,5,46,3],[57,4,48,2],[57,10,48,8,"fetchUserData"],[57,23,48,21],[57,26,48,24],[57,32,48,31,"authToken"],[57,41,48,48],[57,45,48,53],[58,6,49,4],[58,10,49,8],[59,8,50,6],[59,14,50,12,"response"],[59,22,50,20],[59,25,50,23],[59,31,50,29,"axios"],[59,36,50,34],[59,37,50,34,"default"],[59,44,50,34],[59,45,50,35,"get"],[59,48,50,38],[59,49,50,39],[59,52,50,42,"API_URL"],[59,59,50,49],[59,73,50,63],[59,75,50,65],[60,10,51,8,"headers"],[60,17,51,15],[60,19,51,17],[61,12,51,19,"Authorization"],[61,25,51,32],[61,27,51,34],[61,37,51,44,"authToken"],[61,46,51,53],[62,10,51,56],[63,8,52,6],[63,9,52,7],[63,10,52,8],[64,8,53,6,"setUser"],[64,15,53,13],[64,16,53,14,"response"],[64,24,53,22],[64,25,53,23,"data"],[64,29,53,27],[64,30,53,28],[65,6,54,4],[65,7,54,5],[65,8,54,6],[65,15,54,13,"error"],[65,20,54,18],[65,22,54,20],[66,8,55,6,"console"],[66,15,55,13],[66,16,55,14,"error"],[66,21,55,19],[66,22,55,20],[66,49,55,47],[66,51,55,49,"error"],[66,56,55,54],[66,57,55,55],[67,8,56,6],[67,14,56,12,"AsyncStorage"],[67,26,56,24],[67,27,56,24,"default"],[67,34,56,24],[67,35,56,25,"removeItem"],[67,45,56,35],[67,46,56,36],[67,53,56,43],[67,54,56,44],[68,8,57,6,"setToken"],[68,16,57,14],[68,17,57,15],[68,21,57,19],[68,22,57,20],[69,8,58,6,"setUser"],[69,15,58,13],[69,16,58,14],[69,20,58,18],[69,21,58,19],[70,6,59,4],[71,4,60,2],[71,5,60,3],[72,4,62,2],[72,10,62,8,"login"],[72,15,62,13],[72,18,62,16],[72,24,62,16,"login"],[72,25,62,23,"username"],[72,33,62,39],[72,35,62,41,"password"],[72,43,62,57],[72,48,62,62],[73,6,63,4],[73,10,63,8],[74,8,64,6],[74,14,64,12,"response"],[74,22,64,20],[74,25,64,23],[74,31,64,29,"axios"],[74,36,64,34],[74,37,64,34,"default"],[74,44,64,34],[74,45,64,35,"post"],[74,49,64,39],[74,50,64,40],[74,53,64,43,"API_URL"],[74,60,64,50],[74,77,64,67],[74,79,64,69],[75,10,65,8,"username"],[75,18,65,16],[76,10,66,8,"password"],[77,8,67,6],[77,9,67,7],[77,10,67,8],[78,8,68,6],[78,14,68,12],[79,10,68,14,"access_token"],[80,8,68,27],[80,9,68,28],[80,12,68,31,"response"],[80,20,68,39],[80,21,68,40,"data"],[80,25,68,44],[81,8,69,6],[81,14,69,12,"AsyncStorage"],[81,26,69,24],[81,27,69,24,"default"],[81,34,69,24],[81,35,69,25,"setItem"],[81,42,69,32],[81,43,69,33],[81,50,69,40],[81,52,69,42,"access_token"],[81,64,69,54],[81,65,69,55],[82,8,70,6,"setToken"],[82,16,70,14],[82,17,70,15,"access_token"],[82,29,70,27],[82,30,70,28],[83,8,71,6],[83,14,71,12,"fetchUserData"],[83,27,71,25],[83,28,71,26,"access_token"],[83,40,71,38],[83,41,71,39],[84,6,72,4],[84,7,72,5],[84,8,72,6],[84,15,72,13,"error"],[84,20,72,23],[84,22,72,25],[85,8,73,6],[85,14,73,12],[85,18,73,16,"Error"],[85,23,73,21],[85,24,73,22,"error"],[85,29,73,27],[85,30,73,28,"response"],[85,38,73,36],[85,40,73,38,"data"],[85,44,73,42],[85,46,73,44,"detail"],[85,52,73,50],[85,56,73,54],[85,70,73,68],[85,71,73,69],[86,6,74,4],[87,4,75,2],[87,5,75,3],[88,4,77,2],[88,10,77,8,"register"],[88,18,77,16],[88,21,77,19],[88,27,77,19,"register"],[88,28,77,26,"username"],[88,36,77,42],[88,38,77,44,"email"],[88,43,77,57],[88,45,77,59,"password"],[88,53,77,75],[88,58,77,80],[89,6,78,4],[89,10,78,8],[90,8,79,6],[90,14,79,12,"response"],[90,22,79,20],[90,25,79,23],[90,31,79,29,"axios"],[90,36,79,34],[90,37,79,34,"default"],[90,44,79,34],[90,45,79,35,"post"],[90,49,79,39],[90,50,79,40],[90,53,79,43,"API_URL"],[90,60,79,50],[90,80,79,70],[90,82,79,72],[91,10,80,8,"username"],[91,18,80,16],[92,10,81,8,"email"],[92,15,81,13],[93,10,82,8,"password"],[93,18,82,16],[94,10,83,8,"daily_calorie_goal"],[94,28,83,26],[94,30,83,28],[95,8,84,6],[95,9,84,7],[95,10,84,8],[96,8,85,6],[96,14,85,12],[97,10,85,14,"access_token"],[98,8,85,27],[98,9,85,28],[98,12,85,31,"response"],[98,20,85,39],[98,21,85,40,"data"],[98,25,85,44],[99,8,86,6],[99,14,86,12,"AsyncStorage"],[99,26,86,24],[99,27,86,24,"default"],[99,34,86,24],[99,35,86,25,"setItem"],[99,42,86,32],[99,43,86,33],[99,50,86,40],[99,52,86,42,"access_token"],[99,64,86,54],[99,65,86,55],[100,8,87,6,"setToken"],[100,16,87,14],[100,17,87,15,"access_token"],[100,29,87,27],[100,30,87,28],[101,8,88,6],[101,14,88,12,"fetchUserData"],[101,27,88,25],[101,28,88,26,"access_token"],[101,40,88,38],[101,41,88,39],[102,6,89,4],[102,7,89,5],[102,8,89,6],[102,15,89,13,"error"],[102,20,89,23],[102,22,89,25],[103,8,90,6],[103,14,90,12],[103,18,90,16,"Error"],[103,23,90,21],[103,24,90,22,"error"],[103,29,90,27],[103,30,90,28,"response"],[103,38,90,36],[103,40,90,38,"data"],[103,44,90,42],[103,46,90,44,"detail"],[103,52,90,50],[103,56,90,54],[103,77,90,75],[103,78,90,76],[104,6,91,4],[105,4,92,2],[105,5,92,3],[106,4,94,2],[106,10,94,8,"logout"],[106,16,94,14],[106,19,94,17],[106,25,94,17,"logout"],[106,26,94,17],[106,31,94,29],[107,6,95,4],[107,12,95,10,"AsyncStorage"],[107,24,95,22],[107,25,95,22,"default"],[107,32,95,22],[107,33,95,23,"removeItem"],[107,43,95,33],[107,44,95,34],[107,51,95,41],[107,52,95,42],[108,6,96,4,"setToken"],[108,14,96,12],[108,15,96,13],[108,19,96,17],[108,20,96,18],[109,6,97,4,"setUser"],[109,13,97,11],[109,14,97,12],[109,18,97,16],[109,19,97,17],[110,4,98,2],[110,5,98,3],[111,4,100,2],[111,24,101,4],[111,28,101,4,"_reactJsxDevRuntime"],[111,47,101,4],[111,48,101,4,"jsxDEV"],[111,54,101,4],[111,56,101,5,"AuthContext"],[111,67,101,16],[111,68,101,17,"Provider"],[111,76,101,25],[112,6,101,26,"value"],[112,11,101,31],[112,13,101,33],[113,8,101,35,"user"],[113,12,101,39],[114,8,101,41,"token"],[114,13,101,46],[115,8,101,48,"loading"],[115,15,101,55],[116,8,101,57,"login"],[116,13,101,62],[117,8,101,64,"register"],[117,16,101,72],[118,8,101,74,"logout"],[119,6,101,81],[119,7,101,83],[120,6,101,83,"children"],[120,14,101,83],[120,16,102,7,"children"],[121,4,102,15],[122,6,102,15,"fileName"],[122,14,102,15],[122,16,102,15,"_jsxFileName"],[122,28,102,15],[123,6,102,15,"lineNumber"],[123,16,102,15],[124,6,102,15,"columnNumber"],[124,18,102,15],[125,4,102,15],[125,11,103,26],[125,12,103,27],[126,2,105,0],[126,3,105,1],[127,2,107,7],[127,8,107,13,"useAuth"],[127,15,107,20],[127,18,107,23,"useAuth"],[127,19,107,23],[127,24,107,29],[128,4,108,2],[128,10,108,8,"context"],[128,17,108,15],[128,20,108,18],[128,24,108,18,"useContext"],[128,30,108,28],[128,31,108,28,"useContext"],[128,41,108,28],[128,43,108,29,"AuthContext"],[128,54,108,40],[128,55,108,41],[129,4,109,2],[129,8,109,6],[129,9,109,7,"context"],[129,16,109,14],[129,18,109,16],[130,6,110,4],[130,12,110,10],[130,16,110,14,"Error"],[130,21,110,19],[130,22,110,20],[130,64,110,62],[130,65,110,63],[131,4,111,2],[132,4,112,2],[132,11,112,9,"context"],[132,18,112,16],[133,2,113,0],[133,3,113,1],[134,0,113,2],[134,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","fetchUserData","login","register","logout","useAuth"],"mappings":"AAA;qECwB;YCK;GDE;yBEE;GFY;wBGE;GHY;gBIE;GJa;mBKE;GLe;iBME;GNI;CDO;uBQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}