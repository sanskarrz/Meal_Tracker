{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":26,"index":175}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(); // Use relative URL for web, which will go through the proxy\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const API_URL = '';\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('token');\n        if (storedToken) {\n          setToken(storedToken);\n          await fetchUserData(storedToken);\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const fetchUserData = async authToken => {\n      try {\n        const response = await axios.default.get(`${API_URL}/api/auth/me`, {\n          headers: {\n            Authorization: `Bearer ${authToken}`\n          }\n        });\n        setUser(response.data);\n      } catch (error) {\n        console.error('Error fetching user data:', error);\n        await AsyncStorage.default.removeItem('token');\n        setToken(null);\n        setUser(null);\n      }\n    };\n    const login = async (username, password) => {\n      try {\n        const response = await axios.default.post(`${API_URL}/api/auth/login`, {\n          username,\n          password\n        });\n        const {\n          access_token\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        setToken(access_token);\n        await fetchUserData(access_token);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const register = async (username, email, password) => {\n      try {\n        const response = await axios.default.post(`${API_URL}/api/auth/register`, {\n          username,\n          email,\n          password,\n          daily_calorie_goal: 2000\n        });\n        const {\n          access_token\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        setToken(access_token);\n        await fetchUserData(access_token);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('token');\n      setToken(null);\n      setUser(null);\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        loading,\n        login,\n        register,\n        logout\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"uAkFQMmIUxfxJcQTEb8tCM/KFt4=\");\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":141,"map":[[6,26,5,0],[7,2,5,0,"Object"],[7,8,5,0],[7,9,5,0,"defineProperty"],[7,23,5,0],[7,24,5,0,"exports"],[7,31,5,0],[8,4,5,0,"value"],[8,9,5,0],[9,2,5,0],[10,2,5,0],[10,11,5,0,"_interopDefault"],[10,27,5,0,"e"],[10,28,5,0],[11,4,5,0],[11,11,5,0,"e"],[11,12,5,0],[11,16,5,0,"e"],[11,17,5,0],[11,18,5,0,"__esModule"],[11,28,5,0],[11,31,5,0,"e"],[11,32,5,0],[12,6,5,0,"default"],[12,13,5,0],[12,15,5,0,"e"],[13,4,5,0],[14,2,5,0],[15,2,25,0,"Object"],[15,8,25,0],[15,9,25,0,"defineProperty"],[15,23,25,0],[15,24,25,0,"exports"],[15,31,25,0],[16,4,25,0,"enumerable"],[16,14,25,0],[17,4,25,0,"get"],[17,7,25,0],[17,18,25,0,"get"],[17,19,25,0],[18,6,25,0],[18,13,25,0,"AuthProvider"],[18,25,25,0],[19,4,25,0],[20,2,25,0],[21,2,107,0,"Object"],[21,8,107,0],[21,9,107,0,"defineProperty"],[21,23,107,0],[21,24,107,0,"exports"],[21,31,107,0],[22,4,107,0,"enumerable"],[22,14,107,0],[23,4,107,0,"get"],[23,7,107,0],[23,18,107,0,"get"],[23,19,107,0],[24,6,107,0],[24,13,107,0,"useAuth"],[24,20,107,0],[25,4,107,0],[26,2,107,0],[27,2,1,0],[27,6,1,0,"_react"],[27,12,1,0],[27,15,1,0,"require"],[27,22,1,0],[27,23,1,0,"_dependencyMap"],[27,37,1,0],[28,2,2,0],[28,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[28,42,2,0],[28,45,2,0,"require"],[28,52,2,0],[28,53,2,0,"_dependencyMap"],[28,67,2,0],[29,2,2,0],[29,6,2,0,"AsyncStorage"],[29,18,2,0],[29,21,2,0,"_interopDefault"],[29,36,2,0],[29,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[29,73,2,0],[30,2,3,0],[30,6,3,0,"_axios"],[30,12,3,0],[30,15,3,0,"require"],[30,22,3,0],[30,23,3,0,"_dependencyMap"],[30,37,3,0],[31,2,3,0],[31,6,3,0,"axios"],[31,11,3,0],[31,14,3,0,"_interopDefault"],[31,29,3,0],[31,30,3,0,"_axios"],[31,36,3,0],[32,2,3,26],[32,6,3,26,"_reactJsxDevRuntime"],[32,25,3,26],[32,28,3,26,"require"],[32,35,3,26],[32,36,3,26,"_dependencyMap"],[32,50,3,26],[33,2,6,0],[33,8,6,6,"API_URL"],[33,15,6,13],[33,18,6,16],[33,20,6,18],[34,2,23,0],[34,8,23,6,"AuthContext"],[34,19,23,17],[34,35,23,20],[34,39,23,20,"createContext"],[34,45,23,33],[34,46,23,33,"createContext"],[34,59,23,33],[34,61,23,63,"undefined"],[34,70,23,72],[34,71,23,73],[35,2,25,7],[35,8,25,13,"AuthProvider"],[35,20,25,66],[35,23,25,69,"AuthProvider"],[35,24,25,70],[36,4,25,72,"children"],[37,2,25,81],[37,3,25,82],[37,8,25,87],[38,4,25,87,"_s"],[38,6,25,87],[39,4,26,2],[39,10,26,8],[39,11,26,9,"user"],[39,15,26,13],[39,17,26,15,"setUser"],[39,24,26,22],[39,25,26,23],[39,28,26,26],[39,32,26,26,"useState"],[39,38,26,34],[39,39,26,34,"useState"],[39,47,26,34],[39,49,26,48],[39,53,26,52],[39,54,26,53],[40,4,27,2],[40,10,27,8],[40,11,27,9,"token"],[40,16,27,14],[40,18,27,16,"setToken"],[40,26,27,24],[40,27,27,25],[40,30,27,28],[40,34,27,28,"useState"],[40,40,27,36],[40,41,27,36,"useState"],[40,49,27,36],[40,51,27,52],[40,55,27,56],[40,56,27,57],[41,4,28,2],[41,10,28,8],[41,11,28,9,"loading"],[41,18,28,16],[41,20,28,18,"setLoading"],[41,30,28,28],[41,31,28,29],[41,34,28,32],[41,38,28,32,"useState"],[41,44,28,40],[41,45,28,40,"useState"],[41,53,28,40],[41,55,28,41],[41,59,28,45],[41,60,28,46],[42,4,30,2],[42,8,30,2,"useEffect"],[42,14,30,11],[42,15,30,11,"useEffect"],[42,24,30,11],[42,26,30,12],[42,32,30,18],[43,6,31,4,"loadStoredAuth"],[43,20,31,18],[43,21,31,19],[43,22,31,20],[44,4,32,2],[44,5,32,3],[44,7,32,5],[44,9,32,7],[44,10,32,8],[45,4,34,2],[45,10,34,8,"loadStoredAuth"],[45,24,34,22],[45,27,34,25],[45,33,34,25,"loadStoredAuth"],[45,34,34,25],[45,39,34,37],[46,6,35,4],[46,10,35,8],[47,8,36,6],[47,14,36,12,"storedToken"],[47,25,36,23],[47,28,36,26],[47,34,36,32,"AsyncStorage"],[47,46,36,44],[47,47,36,44,"default"],[47,54,36,44],[47,55,36,45,"getItem"],[47,62,36,52],[47,63,36,53],[47,70,36,60],[47,71,36,61],[48,8,37,6],[48,12,37,10,"storedToken"],[48,23,37,21],[48,25,37,23],[49,10,38,8,"setToken"],[49,18,38,16],[49,19,38,17,"storedToken"],[49,30,38,28],[49,31,38,29],[50,10,39,8],[50,16,39,14,"fetchUserData"],[50,29,39,27],[50,30,39,28,"storedToken"],[50,41,39,39],[50,42,39,40],[51,8,40,6],[52,6,41,4],[52,7,41,5],[52,8,41,6],[52,15,41,13,"error"],[52,20,41,18],[52,22,41,20],[53,8,42,6,"console"],[53,15,42,13],[53,16,42,14,"error"],[53,21,42,19],[53,22,42,20],[53,43,42,41],[53,45,42,43,"error"],[53,50,42,48],[53,51,42,49],[54,6,43,4],[54,7,43,5],[54,16,43,14],[55,8,44,6,"setLoading"],[55,18,44,16],[55,19,44,17],[55,24,44,22],[55,25,44,23],[56,6,45,4],[57,4,46,2],[57,5,46,3],[58,4,48,2],[58,10,48,8,"fetchUserData"],[58,23,48,21],[58,26,48,24],[58,32,48,31,"authToken"],[58,41,48,48],[58,45,48,53],[59,6,49,4],[59,10,49,8],[60,8,50,6],[60,14,50,12,"response"],[60,22,50,20],[60,25,50,23],[60,31,50,29,"axios"],[60,36,50,34],[60,37,50,34,"default"],[60,44,50,34],[60,45,50,35,"get"],[60,48,50,38],[60,49,50,39],[60,52,50,42,"API_URL"],[60,59,50,49],[60,73,50,63],[60,75,50,65],[61,10,51,8,"headers"],[61,17,51,15],[61,19,51,17],[62,12,51,19,"Authorization"],[62,25,51,32],[62,27,51,34],[62,37,51,44,"authToken"],[62,46,51,53],[63,10,51,56],[64,8,52,6],[64,9,52,7],[64,10,52,8],[65,8,53,6,"setUser"],[65,15,53,13],[65,16,53,14,"response"],[65,24,53,22],[65,25,53,23,"data"],[65,29,53,27],[65,30,53,28],[66,6,54,4],[66,7,54,5],[66,8,54,6],[66,15,54,13,"error"],[66,20,54,18],[66,22,54,20],[67,8,55,6,"console"],[67,15,55,13],[67,16,55,14,"error"],[67,21,55,19],[67,22,55,20],[67,49,55,47],[67,51,55,49,"error"],[67,56,55,54],[67,57,55,55],[68,8,56,6],[68,14,56,12,"AsyncStorage"],[68,26,56,24],[68,27,56,24,"default"],[68,34,56,24],[68,35,56,25,"removeItem"],[68,45,56,35],[68,46,56,36],[68,53,56,43],[68,54,56,44],[69,8,57,6,"setToken"],[69,16,57,14],[69,17,57,15],[69,21,57,19],[69,22,57,20],[70,8,58,6,"setUser"],[70,15,58,13],[70,16,58,14],[70,20,58,18],[70,21,58,19],[71,6,59,4],[72,4,60,2],[72,5,60,3],[73,4,62,2],[73,10,62,8,"login"],[73,15,62,13],[73,18,62,16],[73,24,62,16,"login"],[73,25,62,23,"username"],[73,33,62,39],[73,35,62,41,"password"],[73,43,62,57],[73,48,62,62],[74,6,63,4],[74,10,63,8],[75,8,64,6],[75,14,64,12,"response"],[75,22,64,20],[75,25,64,23],[75,31,64,29,"axios"],[75,36,64,34],[75,37,64,34,"default"],[75,44,64,34],[75,45,64,35,"post"],[75,49,64,39],[75,50,64,40],[75,53,64,43,"API_URL"],[75,60,64,50],[75,77,64,67],[75,79,64,69],[76,10,65,8,"username"],[76,18,65,16],[77,10,66,8,"password"],[78,8,67,6],[78,9,67,7],[78,10,67,8],[79,8,68,6],[79,14,68,12],[80,10,68,14,"access_token"],[81,8,68,27],[81,9,68,28],[81,12,68,31,"response"],[81,20,68,39],[81,21,68,40,"data"],[81,25,68,44],[82,8,69,6],[82,14,69,12,"AsyncStorage"],[82,26,69,24],[82,27,69,24,"default"],[82,34,69,24],[82,35,69,25,"setItem"],[82,42,69,32],[82,43,69,33],[82,50,69,40],[82,52,69,42,"access_token"],[82,64,69,54],[82,65,69,55],[83,8,70,6,"setToken"],[83,16,70,14],[83,17,70,15,"access_token"],[83,29,70,27],[83,30,70,28],[84,8,71,6],[84,14,71,12,"fetchUserData"],[84,27,71,25],[84,28,71,26,"access_token"],[84,40,71,38],[84,41,71,39],[85,6,72,4],[85,7,72,5],[85,8,72,6],[85,15,72,13,"error"],[85,20,72,23],[85,22,72,25],[86,8,73,6],[86,14,73,12],[86,18,73,16,"Error"],[86,23,73,21],[86,24,73,22,"error"],[86,29,73,27],[86,30,73,28,"response"],[86,38,73,36],[86,40,73,38,"data"],[86,44,73,42],[86,46,73,44,"detail"],[86,52,73,50],[86,56,73,54],[86,70,73,68],[86,71,73,69],[87,6,74,4],[88,4,75,2],[88,5,75,3],[89,4,77,2],[89,10,77,8,"register"],[89,18,77,16],[89,21,77,19],[89,27,77,19,"register"],[89,28,77,26,"username"],[89,36,77,42],[89,38,77,44,"email"],[89,43,77,57],[89,45,77,59,"password"],[89,53,77,75],[89,58,77,80],[90,6,78,4],[90,10,78,8],[91,8,79,6],[91,14,79,12,"response"],[91,22,79,20],[91,25,79,23],[91,31,79,29,"axios"],[91,36,79,34],[91,37,79,34,"default"],[91,44,79,34],[91,45,79,35,"post"],[91,49,79,39],[91,50,79,40],[91,53,79,43,"API_URL"],[91,60,79,50],[91,80,79,70],[91,82,79,72],[92,10,80,8,"username"],[92,18,80,16],[93,10,81,8,"email"],[93,15,81,13],[94,10,82,8,"password"],[94,18,82,16],[95,10,83,8,"daily_calorie_goal"],[95,28,83,26],[95,30,83,28],[96,8,84,6],[96,9,84,7],[96,10,84,8],[97,8,85,6],[97,14,85,12],[98,10,85,14,"access_token"],[99,8,85,27],[99,9,85,28],[99,12,85,31,"response"],[99,20,85,39],[99,21,85,40,"data"],[99,25,85,44],[100,8,86,6],[100,14,86,12,"AsyncStorage"],[100,26,86,24],[100,27,86,24,"default"],[100,34,86,24],[100,35,86,25,"setItem"],[100,42,86,32],[100,43,86,33],[100,50,86,40],[100,52,86,42,"access_token"],[100,64,86,54],[100,65,86,55],[101,8,87,6,"setToken"],[101,16,87,14],[101,17,87,15,"access_token"],[101,29,87,27],[101,30,87,28],[102,8,88,6],[102,14,88,12,"fetchUserData"],[102,27,88,25],[102,28,88,26,"access_token"],[102,40,88,38],[102,41,88,39],[103,6,89,4],[103,7,89,5],[103,8,89,6],[103,15,89,13,"error"],[103,20,89,23],[103,22,89,25],[104,8,90,6],[104,14,90,12],[104,18,90,16,"Error"],[104,23,90,21],[104,24,90,22,"error"],[104,29,90,27],[104,30,90,28,"response"],[104,38,90,36],[104,40,90,38,"data"],[104,44,90,42],[104,46,90,44,"detail"],[104,52,90,50],[104,56,90,54],[104,77,90,75],[104,78,90,76],[105,6,91,4],[106,4,92,2],[106,5,92,3],[107,4,94,2],[107,10,94,8,"logout"],[107,16,94,14],[107,19,94,17],[107,25,94,17,"logout"],[107,26,94,17],[107,31,94,29],[108,6,95,4],[108,12,95,10,"AsyncStorage"],[108,24,95,22],[108,25,95,22,"default"],[108,32,95,22],[108,33,95,23,"removeItem"],[108,43,95,33],[108,44,95,34],[108,51,95,41],[108,52,95,42],[109,6,96,4,"setToken"],[109,14,96,12],[109,15,96,13],[109,19,96,17],[109,20,96,18],[110,6,97,4,"setUser"],[110,13,97,11],[110,14,97,12],[110,18,97,16],[110,19,97,17],[111,4,98,2],[111,5,98,3],[112,4,100,2],[112,24,101,4],[112,28,101,4,"_reactJsxDevRuntime"],[112,47,101,4],[112,48,101,4,"jsxDEV"],[112,54,101,4],[112,56,101,5,"AuthContext"],[112,67,101,16],[112,68,101,17,"Provider"],[112,76,101,25],[113,6,101,26,"value"],[113,11,101,31],[113,13,101,33],[114,8,101,35,"user"],[114,12,101,39],[115,8,101,41,"token"],[115,13,101,46],[116,8,101,48,"loading"],[116,15,101,55],[117,8,101,57,"login"],[117,13,101,62],[118,8,101,64,"register"],[118,16,101,72],[119,8,101,74,"logout"],[120,6,101,81],[120,7,101,83],[121,6,101,83,"children"],[121,14,101,83],[121,16,102,7,"children"],[122,4,102,15],[123,6,102,15,"fileName"],[123,14,102,15],[123,16,102,15,"_jsxFileName"],[123,28,102,15],[124,6,102,15,"lineNumber"],[124,16,102,15],[125,6,102,15,"columnNumber"],[125,18,102,15],[126,4,102,15],[126,11,103,26],[126,12,103,27],[127,2,105,0],[127,3,105,1],[128,2,105,2,"_s"],[128,4,105,2],[128,5,25,13,"AuthProvider"],[128,17,25,66],[129,2,25,66,"_c"],[129,4,25,66],[129,7,25,13,"AuthProvider"],[129,19,25,66],[130,2,107,7],[130,8,107,13,"useAuth"],[130,15,107,20],[130,18,107,23,"useAuth"],[130,19,107,23],[130,24,107,29],[131,4,107,29,"_s2"],[131,7,107,29],[132,4,108,2],[132,10,108,8,"context"],[132,17,108,15],[132,20,108,18],[132,24,108,18,"useContext"],[132,30,108,28],[132,31,108,28,"useContext"],[132,41,108,28],[132,43,108,29,"AuthContext"],[132,54,108,40],[132,55,108,41],[133,4,109,2],[133,8,109,6],[133,9,109,7,"context"],[133,16,109,14],[133,18,109,16],[134,6,110,4],[134,12,110,10],[134,16,110,14,"Error"],[134,21,110,19],[134,22,110,20],[134,64,110,62],[134,65,110,63],[135,4,111,2],[136,4,112,2],[136,11,112,9,"context"],[136,18,112,16],[137,2,113,0],[137,3,113,1],[138,2,113,2,"_s2"],[138,5,113,2],[138,6,107,13,"useAuth"],[138,13,107,20],[139,2,107,20],[139,6,107,20,"_c"],[139,8,107,20],[140,2,107,20,"$RefreshReg$"],[140,14,107,20],[140,15,107,20,"_c"],[140,17,107,20],[141,0,107,20],[141,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","fetchUserData","login","register","logout","useAuth"],"mappings":"AAA;qECwB;YCK;GDE;yBEE;GFY;wBGE;GHY;gBIE;GJa;mBKE;GLe;iBME;GNI;CDO;uBQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}