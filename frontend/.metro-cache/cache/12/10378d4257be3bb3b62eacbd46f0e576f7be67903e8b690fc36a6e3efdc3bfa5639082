{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":26,"index":175}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":176},"end":{"line":4,"column":39,"index":215}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[3], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _expoConstants = require(_dependencyMap[4], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _reactJsxDevRuntime = require(_dependencyMap[5], \"react/jsx-dev-runtime\");\n  const API_URL = Constants.default.expoConfig?.extra?.backendUrl || _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || 'http://localhost:8001';\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('token');\n        if (storedToken) {\n          setToken(storedToken);\n          await fetchUserData(storedToken);\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const fetchUserData = async authToken => {\n      try {\n        const response = await axios.default.get(`${API_URL}/api/auth/me`, {\n          headers: {\n            Authorization: `Bearer ${authToken}`\n          }\n        });\n        setUser(response.data);\n      } catch (error) {\n        console.error('Error fetching user data:', error);\n        await AsyncStorage.default.removeItem('token');\n        setToken(null);\n        setUser(null);\n      }\n    };\n    const login = async (username, password) => {\n      try {\n        const response = await axios.default.post(`${API_URL}/api/auth/login`, {\n          username,\n          password\n        });\n        const {\n          access_token\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        setToken(access_token);\n        await fetchUserData(access_token);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const register = async (username, email, password) => {\n      try {\n        const response = await axios.default.post(`${API_URL}/api/auth/register`, {\n          username,\n          email,\n          password,\n          daily_calorie_goal: 2000\n        });\n        const {\n          access_token\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        setToken(access_token);\n        await fetchUserData(access_token);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('token');\n      setToken(null);\n      setUser(null);\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        loading,\n        login,\n        register,\n        logout\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"uAkFQMmIUxfxJcQTEb8tCM/KFt4=\");\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":144,"map":[[15,2,25,0,"Object"],[15,8,25,0],[15,9,25,0,"defineProperty"],[15,23,25,0],[15,24,25,0,"exports"],[15,31,25,0],[16,4,25,0,"enumerable"],[16,14,25,0],[17,4,25,0,"get"],[17,7,25,0],[17,18,25,0,"get"],[17,19,25,0],[18,6,25,0],[18,13,25,0,"AuthProvider"],[18,25,25,0],[19,4,25,0],[20,2,25,0],[21,2,107,0,"Object"],[21,8,107,0],[21,9,107,0,"defineProperty"],[21,23,107,0],[21,24,107,0,"exports"],[21,31,107,0],[22,4,107,0,"enumerable"],[22,14,107,0],[23,4,107,0,"get"],[23,7,107,0],[23,18,107,0,"get"],[23,19,107,0],[24,6,107,0],[24,13,107,0,"useAuth"],[24,20,107,0],[25,4,107,0],[26,2,107,0],[27,2,113,2],[27,6,113,2,"_expoVirtualEnv"],[27,21,113,2],[27,24,113,2,"require"],[27,31,113,2],[27,32,113,2,"_dependencyMap"],[27,46,113,2],[28,2,1,0],[28,6,1,0,"_react"],[28,12,1,0],[28,15,1,0,"require"],[28,22,1,0],[28,23,1,0,"_dependencyMap"],[28,37,1,0],[29,2,2,0],[29,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[29,42,2,0],[29,45,2,0,"require"],[29,52,2,0],[29,53,2,0,"_dependencyMap"],[29,67,2,0],[30,2,2,0],[30,6,2,0,"AsyncStorage"],[30,18,2,0],[30,21,2,0,"_interopDefault"],[30,36,2,0],[30,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[30,73,2,0],[31,2,3,0],[31,6,3,0,"_axios"],[31,12,3,0],[31,15,3,0,"require"],[31,22,3,0],[31,23,3,0,"_dependencyMap"],[31,37,3,0],[32,2,3,0],[32,6,3,0,"axios"],[32,11,3,0],[32,14,3,0,"_interopDefault"],[32,29,3,0],[32,30,3,0,"_axios"],[32,36,3,0],[33,2,4,0],[33,6,4,0,"_expoConstants"],[33,20,4,0],[33,23,4,0,"require"],[33,30,4,0],[33,31,4,0,"_dependencyMap"],[33,45,4,0],[34,2,4,0],[34,6,4,0,"Constants"],[34,15,4,0],[34,18,4,0,"_interopDefault"],[34,33,4,0],[34,34,4,0,"_expoConstants"],[34,48,4,0],[35,2,4,39],[35,6,4,39,"_reactJsxDevRuntime"],[35,25,4,39],[35,28,4,39,"require"],[35,35,4,39],[35,36,4,39,"_dependencyMap"],[35,50,4,39],[36,2,6,0],[36,8,6,6,"API_URL"],[36,15,6,13],[36,18,6,16,"Constants"],[36,27,6,25],[36,28,6,25,"default"],[36,35,6,25],[36,36,6,26,"expoConfig"],[36,46,6,36],[36,48,6,38,"extra"],[36,53,6,43],[36,55,6,45,"backendUrl"],[36,65,6,55],[36,69,6,55,"_expoVirtualEnv"],[36,84,6,55],[36,85,6,55,"env"],[36,88,6,55],[36,89,6,55,"EXPO_PUBLIC_BACKEND_URL"],[36,112,6,94],[36,116,6,98],[36,139,6,121],[37,2,23,0],[37,8,23,6,"AuthContext"],[37,19,23,17],[37,35,23,20],[37,39,23,20,"createContext"],[37,45,23,33],[37,46,23,33,"createContext"],[37,59,23,33],[37,61,23,63,"undefined"],[37,70,23,72],[37,71,23,73],[38,2,25,7],[38,8,25,13,"AuthProvider"],[38,20,25,66],[38,23,25,69,"AuthProvider"],[38,24,25,70],[39,4,25,72,"children"],[40,2,25,81],[40,3,25,82],[40,8,25,87],[41,4,25,87,"_s"],[41,6,25,87],[42,4,26,2],[42,10,26,8],[42,11,26,9,"user"],[42,15,26,13],[42,17,26,15,"setUser"],[42,24,26,22],[42,25,26,23],[42,28,26,26],[42,32,26,26,"useState"],[42,38,26,34],[42,39,26,34,"useState"],[42,47,26,34],[42,49,26,48],[42,53,26,52],[42,54,26,53],[43,4,27,2],[43,10,27,8],[43,11,27,9,"token"],[43,16,27,14],[43,18,27,16,"setToken"],[43,26,27,24],[43,27,27,25],[43,30,27,28],[43,34,27,28,"useState"],[43,40,27,36],[43,41,27,36,"useState"],[43,49,27,36],[43,51,27,52],[43,55,27,56],[43,56,27,57],[44,4,28,2],[44,10,28,8],[44,11,28,9,"loading"],[44,18,28,16],[44,20,28,18,"setLoading"],[44,30,28,28],[44,31,28,29],[44,34,28,32],[44,38,28,32,"useState"],[44,44,28,40],[44,45,28,40,"useState"],[44,53,28,40],[44,55,28,41],[44,59,28,45],[44,60,28,46],[45,4,30,2],[45,8,30,2,"useEffect"],[45,14,30,11],[45,15,30,11,"useEffect"],[45,24,30,11],[45,26,30,12],[45,32,30,18],[46,6,31,4,"loadStoredAuth"],[46,20,31,18],[46,21,31,19],[46,22,31,20],[47,4,32,2],[47,5,32,3],[47,7,32,5],[47,9,32,7],[47,10,32,8],[48,4,34,2],[48,10,34,8,"loadStoredAuth"],[48,24,34,22],[48,27,34,25],[48,33,34,25,"loadStoredAuth"],[48,34,34,25],[48,39,34,37],[49,6,35,4],[49,10,35,8],[50,8,36,6],[50,14,36,12,"storedToken"],[50,25,36,23],[50,28,36,26],[50,34,36,32,"AsyncStorage"],[50,46,36,44],[50,47,36,44,"default"],[50,54,36,44],[50,55,36,45,"getItem"],[50,62,36,52],[50,63,36,53],[50,70,36,60],[50,71,36,61],[51,8,37,6],[51,12,37,10,"storedToken"],[51,23,37,21],[51,25,37,23],[52,10,38,8,"setToken"],[52,18,38,16],[52,19,38,17,"storedToken"],[52,30,38,28],[52,31,38,29],[53,10,39,8],[53,16,39,14,"fetchUserData"],[53,29,39,27],[53,30,39,28,"storedToken"],[53,41,39,39],[53,42,39,40],[54,8,40,6],[55,6,41,4],[55,7,41,5],[55,8,41,6],[55,15,41,13,"error"],[55,20,41,18],[55,22,41,20],[56,8,42,6,"console"],[56,15,42,13],[56,16,42,14,"error"],[56,21,42,19],[56,22,42,20],[56,43,42,41],[56,45,42,43,"error"],[56,50,42,48],[56,51,42,49],[57,6,43,4],[57,7,43,5],[57,16,43,14],[58,8,44,6,"setLoading"],[58,18,44,16],[58,19,44,17],[58,24,44,22],[58,25,44,23],[59,6,45,4],[60,4,46,2],[60,5,46,3],[61,4,48,2],[61,10,48,8,"fetchUserData"],[61,23,48,21],[61,26,48,24],[61,32,48,31,"authToken"],[61,41,48,48],[61,45,48,53],[62,6,49,4],[62,10,49,8],[63,8,50,6],[63,14,50,12,"response"],[63,22,50,20],[63,25,50,23],[63,31,50,29,"axios"],[63,36,50,34],[63,37,50,34,"default"],[63,44,50,34],[63,45,50,35,"get"],[63,48,50,38],[63,49,50,39],[63,52,50,42,"API_URL"],[63,59,50,49],[63,73,50,63],[63,75,50,65],[64,10,51,8,"headers"],[64,17,51,15],[64,19,51,17],[65,12,51,19,"Authorization"],[65,25,51,32],[65,27,51,34],[65,37,51,44,"authToken"],[65,46,51,53],[66,10,51,56],[67,8,52,6],[67,9,52,7],[67,10,52,8],[68,8,53,6,"setUser"],[68,15,53,13],[68,16,53,14,"response"],[68,24,53,22],[68,25,53,23,"data"],[68,29,53,27],[68,30,53,28],[69,6,54,4],[69,7,54,5],[69,8,54,6],[69,15,54,13,"error"],[69,20,54,18],[69,22,54,20],[70,8,55,6,"console"],[70,15,55,13],[70,16,55,14,"error"],[70,21,55,19],[70,22,55,20],[70,49,55,47],[70,51,55,49,"error"],[70,56,55,54],[70,57,55,55],[71,8,56,6],[71,14,56,12,"AsyncStorage"],[71,26,56,24],[71,27,56,24,"default"],[71,34,56,24],[71,35,56,25,"removeItem"],[71,45,56,35],[71,46,56,36],[71,53,56,43],[71,54,56,44],[72,8,57,6,"setToken"],[72,16,57,14],[72,17,57,15],[72,21,57,19],[72,22,57,20],[73,8,58,6,"setUser"],[73,15,58,13],[73,16,58,14],[73,20,58,18],[73,21,58,19],[74,6,59,4],[75,4,60,2],[75,5,60,3],[76,4,62,2],[76,10,62,8,"login"],[76,15,62,13],[76,18,62,16],[76,24,62,16,"login"],[76,25,62,23,"username"],[76,33,62,39],[76,35,62,41,"password"],[76,43,62,57],[76,48,62,62],[77,6,63,4],[77,10,63,8],[78,8,64,6],[78,14,64,12,"response"],[78,22,64,20],[78,25,64,23],[78,31,64,29,"axios"],[78,36,64,34],[78,37,64,34,"default"],[78,44,64,34],[78,45,64,35,"post"],[78,49,64,39],[78,50,64,40],[78,53,64,43,"API_URL"],[78,60,64,50],[78,77,64,67],[78,79,64,69],[79,10,65,8,"username"],[79,18,65,16],[80,10,66,8,"password"],[81,8,67,6],[81,9,67,7],[81,10,67,8],[82,8,68,6],[82,14,68,12],[83,10,68,14,"access_token"],[84,8,68,27],[84,9,68,28],[84,12,68,31,"response"],[84,20,68,39],[84,21,68,40,"data"],[84,25,68,44],[85,8,69,6],[85,14,69,12,"AsyncStorage"],[85,26,69,24],[85,27,69,24,"default"],[85,34,69,24],[85,35,69,25,"setItem"],[85,42,69,32],[85,43,69,33],[85,50,69,40],[85,52,69,42,"access_token"],[85,64,69,54],[85,65,69,55],[86,8,70,6,"setToken"],[86,16,70,14],[86,17,70,15,"access_token"],[86,29,70,27],[86,30,70,28],[87,8,71,6],[87,14,71,12,"fetchUserData"],[87,27,71,25],[87,28,71,26,"access_token"],[87,40,71,38],[87,41,71,39],[88,6,72,4],[88,7,72,5],[88,8,72,6],[88,15,72,13,"error"],[88,20,72,23],[88,22,72,25],[89,8,73,6],[89,14,73,12],[89,18,73,16,"Error"],[89,23,73,21],[89,24,73,22,"error"],[89,29,73,27],[89,30,73,28,"response"],[89,38,73,36],[89,40,73,38,"data"],[89,44,73,42],[89,46,73,44,"detail"],[89,52,73,50],[89,56,73,54],[89,70,73,68],[89,71,73,69],[90,6,74,4],[91,4,75,2],[91,5,75,3],[92,4,77,2],[92,10,77,8,"register"],[92,18,77,16],[92,21,77,19],[92,27,77,19,"register"],[92,28,77,26,"username"],[92,36,77,42],[92,38,77,44,"email"],[92,43,77,57],[92,45,77,59,"password"],[92,53,77,75],[92,58,77,80],[93,6,78,4],[93,10,78,8],[94,8,79,6],[94,14,79,12,"response"],[94,22,79,20],[94,25,79,23],[94,31,79,29,"axios"],[94,36,79,34],[94,37,79,34,"default"],[94,44,79,34],[94,45,79,35,"post"],[94,49,79,39],[94,50,79,40],[94,53,79,43,"API_URL"],[94,60,79,50],[94,80,79,70],[94,82,79,72],[95,10,80,8,"username"],[95,18,80,16],[96,10,81,8,"email"],[96,15,81,13],[97,10,82,8,"password"],[97,18,82,16],[98,10,83,8,"daily_calorie_goal"],[98,28,83,26],[98,30,83,28],[99,8,84,6],[99,9,84,7],[99,10,84,8],[100,8,85,6],[100,14,85,12],[101,10,85,14,"access_token"],[102,8,85,27],[102,9,85,28],[102,12,85,31,"response"],[102,20,85,39],[102,21,85,40,"data"],[102,25,85,44],[103,8,86,6],[103,14,86,12,"AsyncStorage"],[103,26,86,24],[103,27,86,24,"default"],[103,34,86,24],[103,35,86,25,"setItem"],[103,42,86,32],[103,43,86,33],[103,50,86,40],[103,52,86,42,"access_token"],[103,64,86,54],[103,65,86,55],[104,8,87,6,"setToken"],[104,16,87,14],[104,17,87,15,"access_token"],[104,29,87,27],[104,30,87,28],[105,8,88,6],[105,14,88,12,"fetchUserData"],[105,27,88,25],[105,28,88,26,"access_token"],[105,40,88,38],[105,41,88,39],[106,6,89,4],[106,7,89,5],[106,8,89,6],[106,15,89,13,"error"],[106,20,89,23],[106,22,89,25],[107,8,90,6],[107,14,90,12],[107,18,90,16,"Error"],[107,23,90,21],[107,24,90,22,"error"],[107,29,90,27],[107,30,90,28,"response"],[107,38,90,36],[107,40,90,38,"data"],[107,44,90,42],[107,46,90,44,"detail"],[107,52,90,50],[107,56,90,54],[107,77,90,75],[107,78,90,76],[108,6,91,4],[109,4,92,2],[109,5,92,3],[110,4,94,2],[110,10,94,8,"logout"],[110,16,94,14],[110,19,94,17],[110,25,94,17,"logout"],[110,26,94,17],[110,31,94,29],[111,6,95,4],[111,12,95,10,"AsyncStorage"],[111,24,95,22],[111,25,95,22,"default"],[111,32,95,22],[111,33,95,23,"removeItem"],[111,43,95,33],[111,44,95,34],[111,51,95,41],[111,52,95,42],[112,6,96,4,"setToken"],[112,14,96,12],[112,15,96,13],[112,19,96,17],[112,20,96,18],[113,6,97,4,"setUser"],[113,13,97,11],[113,14,97,12],[113,18,97,16],[113,19,97,17],[114,4,98,2],[114,5,98,3],[115,4,100,2],[115,24,101,4],[115,28,101,4,"_reactJsxDevRuntime"],[115,47,101,4],[115,48,101,4,"jsxDEV"],[115,54,101,4],[115,56,101,5,"AuthContext"],[115,67,101,16],[115,68,101,17,"Provider"],[115,76,101,25],[116,6,101,26,"value"],[116,11,101,31],[116,13,101,33],[117,8,101,35,"user"],[117,12,101,39],[118,8,101,41,"token"],[118,13,101,46],[119,8,101,48,"loading"],[119,15,101,55],[120,8,101,57,"login"],[120,13,101,62],[121,8,101,64,"register"],[121,16,101,72],[122,8,101,74,"logout"],[123,6,101,81],[123,7,101,83],[124,6,101,83,"children"],[124,14,101,83],[124,16,102,7,"children"],[125,4,102,15],[126,6,102,15,"fileName"],[126,14,102,15],[126,16,102,15,"_jsxFileName"],[126,28,102,15],[127,6,102,15,"lineNumber"],[127,16,102,15],[128,6,102,15,"columnNumber"],[128,18,102,15],[129,4,102,15],[129,11,103,26],[129,12,103,27],[130,2,105,0],[130,3,105,1],[131,2,105,2,"_s"],[131,4,105,2],[131,5,25,13,"AuthProvider"],[131,17,25,66],[132,2,25,66,"_c"],[132,4,25,66],[132,7,25,13,"AuthProvider"],[132,19,25,66],[133,2,107,7],[133,8,107,13,"useAuth"],[133,15,107,20],[133,18,107,23,"useAuth"],[133,19,107,23],[133,24,107,29],[134,4,107,29,"_s2"],[134,7,107,29],[135,4,108,2],[135,10,108,8,"context"],[135,17,108,15],[135,20,108,18],[135,24,108,18,"useContext"],[135,30,108,28],[135,31,108,28,"useContext"],[135,41,108,28],[135,43,108,29,"AuthContext"],[135,54,108,40],[135,55,108,41],[136,4,109,2],[136,8,109,6],[136,9,109,7,"context"],[136,16,109,14],[136,18,109,16],[137,6,110,4],[137,12,110,10],[137,16,110,14,"Error"],[137,21,110,19],[137,22,110,20],[137,64,110,62],[137,65,110,63],[138,4,111,2],[139,4,112,2],[139,11,112,9,"context"],[139,18,112,16],[140,2,113,0],[140,3,113,1],[141,2,113,2,"_s2"],[141,5,113,2],[141,6,107,13,"useAuth"],[141,13,107,20],[142,2,107,20],[142,6,107,20,"_c"],[142,8,107,20],[143,2,107,20,"$RefreshReg$"],[143,14,107,20],[143,15,107,20,"_c"],[143,17,107,20],[144,0,107,20],[144,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","fetchUserData","login","register","logout","useAuth"],"mappings":"AAA;qECwB;YCK;GDE;yBEE;GFY;wBGE;GHY;gBIE;GJa;mBKE;GLe;iBME;GNI;CDO;uBQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}